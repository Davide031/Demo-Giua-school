{% extends 'ata/index.html.twig' %}

{% block pagina_contenuto %}
<div class="container-fluid gs-mt-3">
  <h1 class="text-center gs-h2 gs-mt-2">{{ 'title.modifica_ata'|trans }}</h1>
  {% for label,messages in app.flashes %}
    {% for msg in messages %}
  <div class="alert alert-{{ label }}">{{ msg|trans }}</div>
    {% endfor %}
  {% endfor %}
  {% include('include/form-inline.html.twig') %}
  <table class="table table-bordered table-hover table-striped gs-mb-0">
    <thead class="bg-success">
      <tr>
        <th class="col-sm-2">{{ 'label.cognome'|trans }}</th>
        <th class="col-sm-2">{{ 'label.nome'|trans }}</th>
        <th class="col-sm-2">{{ 'label.username'|trans }}</th>
        <th class="col-sm-2">{{ 'label.sede'|trans }}</th>
        <th class="col-sm-4">{{ 'label.action'|trans }}</th>
      </tr>
    </thead>
    <tbody>
    {% for u in lista %}
      <tr>
        <td>{% if not u.abilitato %}<span title="{{ 'label.disabilitato'|trans }}"><span class="glyphicon glyphicon-ban-circle gs-mr-2" aria-hidden="true"></span></span>{% endif %}{{ u.cognome }}</td>
        <td>{{ u.nome }}</td>
        <td>{{ u.username }}</td>
        <td>{{ u.sede ? u.sede.citta  }}</td>
        <td>
          <a class="btn btn-primary btn-xs" href="{{ path('ata_edit', {'id': u.id}) }}" role="button" title="Modifica i dati dell'utente"><span class="glyphicon glyphicon-edit gs-mr-2" aria-hidden="true"></span>{{ 'label.edit'|trans }}</a>
          {% if u.abilitato %}
          <a class="btn btn-danger btn-xs" href="{{ path('ata_abilita', {'id': u.id, 'abilita': 0}) }}" role="button" title="Disabilita l'utente"><span class="glyphicon glyphicon-ban-circle gs-mr-2" aria-hidden="true"></span>{{ 'label.disable'|trans }}</a>
          {% else %}
          <a class="btn btn-success btn-xs" href="{{ path('ata_abilita', {'id': u.id, 'abilita': 1}) }}" role="button" title="Abilita l'utente"><span class="glyphicon glyphicon-ok gs-mr-2" aria-hidden="true"></span>{{ 'label.enable'|trans }}</a>
          {% endif %}
          <a class="btn btn-primary btn-xs" href="{{ path('ata_password', {'id': u.id}) }}" role="button" title="Genera una nuova password e la invia all'utente"><span class="glyphicon glyphicon-lock gs-mr-2" aria-hidden="true"></span>{{ 'label.password'|trans }}</a>
        </td>
      </tr>
    {% endfor %}
    </tbody>
  </table>
  {% include 'include/paginate.html.twig' with {'maxPagine': maxPages, 'pagina': page, 'url': 'ata_modifica'} %}
</div>
{% endblock %}
